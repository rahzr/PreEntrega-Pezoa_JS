let sPhoneData,carritoData=[];function muestraDatos(){let gridProductos=document.querySelector(".grid-productos"),fragment=document.createDocumentFragment();sPhoneData.forEach(item=>{let productCard=document.createElement("div"),precioFormateado=item.precio.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,"."),ofertaFormateada=item.oferta.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,".");productCard.innerHTML=`\n      <div class="product-card uk-card uk-light uk-relative">\n        <span class="sku">${item.id}</span>\n        <div class="marca uk-text-small">${item.marca}</div>\n        <h3 class="modelo uk-card-title uk-margin-remove">${item.modelo}</h3>\n        <div class="uk-text-small atributos">\n          <span class="color">${item.color}</span>\n          <span class="capacidad">${item.capacidad}</span>\n        </div>\n        <div class="oferta">$${ofertaFormateada}</div>\n        <div class="uk-text-small">$${precioFormateado}</div>\n        <button class="btn-agrega uk-button-default uk-padding-small uk-width-1-1 uk-margin-top">Agregar al carrito</button>\n      </div>`,fragment.appendChild(productCard)}),gridProductos.innerHTML="",gridProductos.appendChild(fragment);let searchBox=document.querySelector(".uk-search-input"),searchForm=document.querySelector(".uk-search"),addToCartButtons;function performSearch(){let searchTerm=searchBox.value.toLowerCase(),productCards;document.querySelectorAll(".grid-productos .product-card").forEach(card=>{let marca=card.querySelector(".product-card .marca").textContent.toLowerCase(),modelo=card.querySelector(".product-card .modelo").textContent.toLowerCase(),color=card.querySelector(".product-card .color").textContent.toLowerCase(),id=card.querySelector(".product-card .sku").textContent.toLowerCase();marca.includes(searchTerm)||modelo.includes(searchTerm)||color.includes(searchTerm)||id.includes(searchTerm)?card.classList.remove("hidden"):card.classList.add("hidden")})}function updateCarrito(){}function saveCarritoData(){localStorage.setItem("carritoData",JSON.stringify(carritoData))}function loadCarritoData(){let savedData=localStorage.getItem("carritoData");savedData&&(carritoData=JSON.parse(savedData),carritoData.forEach(product=>{let carritoInfo=document.createElement("div"),removeButton;carritoInfo.classList.add("info"),carritoInfo.innerHTML=`\n        <div class="marca">${product.marca}</div>\n        <div class="modelo">${product.modelo}</div>\n        <div class="color">${product.color}</div>\n        <div class="oferta">${product.oferta}</div>\n        <button class="btn-quitar uk-button-default uk-width-1-1 uk-margin-top">Quitar</button>`,document.querySelector("#carrito").appendChild(carritoInfo),carritoInfo.querySelector(".btn-quitar").addEventListener("click",()=>{carritoInfo.remove();let index=carritoData.findIndex(p=>p.sku===product.sku);-1!==index&&carritoData.splice(index,1),saveCarritoData()})}))}searchBox.addEventListener("input",()=>{performSearch()}),searchForm.addEventListener("submit",event=>{event.preventDefault(),performSearch()}),document.querySelectorAll(".btn-agrega").forEach(button=>{button.addEventListener("click",()=>{let productCard=button.closest(".product-card"),sku=productCard.querySelector(".sku").textContent,marca=productCard.querySelector(".marca").textContent,modelo=productCard.querySelector(".modelo").textContent,color=productCard.querySelector(".color").textContent,oferta=productCard.querySelector(".oferta").textContent,carritoInfo=document.createElement("div"),removeButton;carritoInfo.classList.add("info"),carritoInfo.innerHTML=`\n        <div class="marca">${marca}</div>\n        <div class="modelo">${modelo}</div>\n        <div class="color">${color}</div>\n        <div class="oferta">${oferta}</div>\n        <button class="btn-quitar uk-button-default uk-width-1-1 uk-margin-top">Quitar</button>`,document.querySelector("#carrito").appendChild(carritoInfo),carritoData.push({sku:sku,marca:marca,modelo:modelo,color:color,oferta:oferta}),saveCarritoData(),carritoInfo.querySelector(".btn-quitar").addEventListener("click",()=>{carritoInfo.remove();let index=carritoData.findIndex(product=>product.sku===sku);-1!==index&&carritoData.splice(index,1),saveCarritoData()})})}),loadCarritoData()}fetch("assets/data/productos.json").then(response=>response.json()).then(data=>{sPhoneData=data,muestraDatos()}).catch(error=>{console.error("Error json:",error)});